# Drivers Hub: Backend

```
    ____       _                         __  __      __  
   / __ \_____(_)   _____  __________   / / / /_  __/ /_   
  / / / / ___/ / | / / _ \/ ___/ ___/  / /_/ / / / / __ \  
 / /_/ / /  / /| |/ /  __/ /  (__  )  / __  / /_/ / /_/ /  
/_____/_/  /_/ |___/\___/_/  /____/  /_/ /_/\__,_/_.___/  

```

**Features:**  
0.Multiple Drivers Hubs in one server process  
1.Asynchronous IO (database), making FastAPI really fast  
2.Original authentication and rate limiting algorithm  
3.Discord / Steam / Password Login & MFA Support  
4.Role-based permission management  
5.Notification system (Drivers Hub & Discord)  
6.Multiple languages  

**Official Plugins**  
Announcement, Application, Banner, Challenge, Division, Downloads, Event, Tracker  

**External Plugins**  
~~Place external plugins under `./external_plugins` and the program will detect and load it after all official plugins.~~  
This feature has been disabled temporarily due to routing updates.  

**Upgrade Plugin**  
*A plugin loaded to upgrade existing data to latest version, mainly used when database structure is updated*  
Place "upgrade.py" in program directory, which contains **str** `target_version` and **def** `run`. Execute main program with `upgrade` parameter, it will detect if `target_version` match current version, then execute the `run` function.  

**About Banner**  
To save memory when running multiple Drivers Hub, banner is generated by `bannergen` in a separate process. It must be running so that banner function could work.  

**API**  
1.Authorization  
`await auth(authorization, request, allow_application_token = False, check_member = True, required_permission = ["admin", "driver"])`  
returns `{error: bool, discordid: int, userid: int, name: str, roles: list, application_token: bool}`  
2.Rate limit  
`await ratelimit(request, endpoint, limittime, limitcnt)`  
When rate limited, returns `(True, JSONResponse)`  
When not rate limited, returns `(False, resp_headers: dict)`  

**More Info?**  
Please refer to our [wiki](https://wiki.charlws.com)  
For API documentation, please load [openapi.json](./openapi.json)  

&copy; 2023 [CharlesWithC](https://charlws.com)  
